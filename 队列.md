# 消息队列

## 1.为什么用？
 - 异步，解耦，削峰。

## 2.[常见问题](https://blog.csdn.net/qq_36236890/article/details/81174504)

- 消息丢失：生产者丢失/队列丢失/消费者丢失
- 消息重复：生产者重复，消费者重复
- 架构问题，单点故障
- 消息积压问题
- 如何保证消息的顺序性问题？
- 一致性问题，多个消费者，一个消息失败，其他消息成功该怎么办？
	

## 3.架构&原理&解决方案	

### 3.1 NSQ   
- [NSQ架构](https://zhuanlan.zhihu.com/p/37081073)




### 3.2 kafka
* productor
     - 可以选择消息入哪个topic，哪个分区
* topic
* partition 分区，水平扩展
     - 每个分区有一个leader，0-多个follower
   
* consumer
     - 就是一个partition，只能被消费组里的一个消费者消费，但是可以同时被多个消费组消费。
* broker 代理

* offset 消费者控制，可重复读取
   
   
   
   

	